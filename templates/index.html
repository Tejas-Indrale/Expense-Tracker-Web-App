<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Expense Tracker</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

    <div class="container">
        <div class="navbar">
            <h1>ğŸ’° Expense Tracker</h1>
            <a href="/insights">ğŸ’¡ AI Insights</a>
            <button class="toggle-dark" onclick="toggleDarkMode()">ğŸŒ™ Dark Mode</button>
        </div>

        <!-- Add Expense -->
        <h2>Add a New Expense</h2>
        <form action="/add" method="post">
            <input type="number" step="0.01" name="amount" placeholder="Amount (â‚¹)" required>
            <input type="text" name="category" placeholder="Category" required>
            <button type="submit">â• Add Expense</button>
        </form>

        <!-- Filter -->
        <h2>Filter by Category</h2>
        <form method="GET" action="/">
            <input type="text" name="category" placeholder="e.g. food">
            <button type="submit">ğŸ” Filter</button>
        </form>

        <!-- Expense List -->
        <h2>All Expenses</h2>
        {% if filter_mode %}
            <p>ğŸ” Showing results for: <strong>{{ category }}</strong></p>
        {% endif %}

        {% if expenses %}
            {% for expense in expenses %}
                <div class="expense">
                    â‚¹{{ expense.amount }} â€” <strong>{{ expense.category }}</strong>
                </div>
            {% endfor %}
        {% else %}
            <p>No expenses added yet.</p>
        {% endif %}

        <!-- Total -->
        <div class="total-box">
            Total Expenses: â‚¹{{ total }}
        </div>

        <hr>
        <a href="/insights">ğŸ’¡ View AI Spending Insights</a>
    </div>

    <!-- ğŸ” Dark Mode Toggle Script -->
    <script>
        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            const btn = document.querySelector('.toggle-dark');
            btn.textContent = document.body.classList.contains('dark-mode') ? 'â˜€ï¸ Light Mode' : 'ğŸŒ™ Dark Mode';
        }
    </script>

</body>
</html>
